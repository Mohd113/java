package csv;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
	
	// Setting output file to write data.
	private static final String FILE = ("C:\\Users\\Chiefan\\Documents\\csv2.txt");

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
		// Setting fline string to read first line for number of cases.
		String fline = null; 
	
		// Reading first line and assigning it to fline.
		try (BufferedReader br = new BufferedReader(new FileReader("C:\\Users\\Chiefan\\Documents\\csv1.txt"))) {
			fline = br.readLine();
			String line;
			// for loop to read lines and performing check() method with each line.
			for (int i = 1; i <= Integer.parseInt(fline); i++) { 
				line = br.readLine();
				
				// Printing result in console.
				System.out.println(check(line));
				
				// Writing result to output file.
				try (BufferedWriter bw = new BufferedWriter(new FileWriter(FILE, true))) { 
					bw.write(check(line));
					bw.newLine();
				}
				catch (IOException e1) { 
					e1.printStackTrace();
				}
			}
			
		}
		catch (IOException e) { 
			e.printStackTrace();
		}

	}
	
	// check() method to replace characters.
	public static String check(String cs) { 
		char[] cs1 = cs.toCharArray();
		int count = 0;
		for (int a = 1; a < cs1.length; a++) {
			if (cs1[a] == '%' || cs1[a] == '|' || cs1[a] == '#' || cs1[a] == '$') {
				cs1[a] = ',';
				count = count + 1;
			}
		}
		count = count +1;
		return String.valueOf(cs1) + "," + Integer.toString(count);
	}

}
